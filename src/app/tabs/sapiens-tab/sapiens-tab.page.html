<app-header></app-header>

<ion-content>
  <div class="flex flex-col h-full">
    <!-- Área de mensajes del chat con desplazamiento -->
    <div class="flex-1 overflow-auto p-4 space-y-4">
      <ng-container *ngFor="let msg of chatMessages">
        <div class="w-full flex"
          [ngClass]="{'justify-end': msg.sender === 'user', 'justify-start': msg.sender === 'app'}">
          <div class="relative p-4 rounded-3xl inline-block"
            [ngClass]="{'rounded-bl-none bg-blue-500 text-white': msg.sender === 'app', 'rounded-br-none bg-gray-200 text-black': msg.sender === 'user'}">
            <p>{{ msg.text }}</p>
          </div>
        </div>
        <!-- Añade un app-swiper si hay resultados de búsqueda -->
        <ng-container *ngIf="msg.searchResults && msg.searchResults.length > 0">
          <app-swiper [items]="msg.searchResults" title="Resultados" containerClass="pt-4"></app-swiper>
        </ng-container>
      </ng-container>
    </div>
  </div>

  <div class="ion-padding-bottom"></div>
</ion-content>

<!-- Barra de búsqueda fija en la parte inferior -->
<ion-footer>
  <ion-toolbar class="bg-[var(--ion-tab-bar-background)]">
    <div class="flex items-center p-4">
      <input type="text" id="prueba"
        class="flex-1 rounded-full dark:bg-gray-600 dark:text-white dark:placeholder-stone-300"
        placeholder="Escribe aquí..." [(ngModel)]="searchText" (keyup.enter)="searchMovies()" />
      <ion-button fill="clear" (click)="searchMovies()">
        <ion-icon name="send"></ion-icon>
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>